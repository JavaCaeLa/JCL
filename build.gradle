/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'andre' at '04/02/16 15:36' with Gradle 2.9
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/2.9/userguide/tutorial_java_projects.html
 */

 allprojects {
    // Apply the java plugin to add support for Java
    apply plugin: 'java'
    apply plugin: 'eclipse' 
       
    compileJava.options.encoding = 'ISO-8859-1'
    
    // In this section you declare where to find the dependencies of your project
	repositories {
    	jcenter()
		mavenCentral()
    	mavenLocal()
    	maven {
        	url 'http://4thline.org/m2'
    	}
	}
	
	// In this section you declare the dependencies for your production and test code
	dependencies {
    	// The production code uses the SLF4J logging API at compile time
    	compile 'io.mraa:mraa:1.3.0'
    	compile 'org.slf4j:slf4j-api:1.7.13'
		compile 'org.javassist:javassist:3.20.0-GA'
		compile 'io.protostuff:protostuff-core:1.4.0'
		compile 'io.protostuff:protostuff-api:1.4.0'
		compile 'io.protostuff:protostuff-collectionschema:1.4.0'
		compile 'io.protostuff:protostuff-runtime:1.4.0'
		// Cling
		compile group: 'org.fourthline.cling', name: 'cling-core', version:'2.0.1'
    	compile group: 'org.fourthline.cling', name: 'cling-support', version:'2.0.1'
    	
    	compile group: 'it.unimi.dsi', name: 'fastutil', version: '7.0.12'
    	
    	// Declare the dependency for your favourite test framework you want to use in your tests.
    	// TestNG is also supported by the Gradle Test task. Just change the
    	// testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
    	// 'test.useTestNG()' to your build script.
    	testCompile 'junit:junit:4.12'
	}
		
	task copyRuntimeLibs(type: Copy) {
    into "lib"
    from configurations.runtime
  }
  
  build.dependsOn(copyRuntimeLibs)
}

subprojects {    
    println "Andre Luis"
	version = '1.0'
//	sourceCompatibility = 1.7
//	targetCompatibility = 1.7
	
	sourceSets{
    	main.java.srcDir rootProject.sourceSets.main.java
	}

}

project(':JCL_Host') {
// Apply the java plugin to add support for Java    
//apply plugin: 'application'

//mainClassName = 'implementations.dm_kernel.host.MainHost'

jar {
    	from {
        	(configurations.runtime).collect {
            	it.isDirectory() ? it : zipTree(it)
        	}
    	}
    	
    	 destinationDir project.file('../JCL_RELEASE/jcl_JARS_pacu/')
    	 
    	manifest {
        	attributes("Main-Class": "implementations.dm_kernel.host.MainHost" )
    	}
	}
}

project(':JCL_Server') {
// Apply the java plugin to add support for Java    
//apply plugin: 'application'

//mainClassName = 'implementations.dm_kernel.server.MainServer'

jar {
    	from {
        	(configurations.runtime).collect {
            	it.isDirectory() ? it : zipTree(it)
        	}
    	}
    	 destinationDir project.file('../JCL_RELEASE/jcl_JARS_pacu/')
    	 
    	manifest {
        	attributes("Main-Class": "implementations.dm_kernel.server.MainServer")
    	}
	}
}

project(':JCL_SuperPeer') {
// Apply the java plugin to add support for Java    
//apply plugin: 'application'

//mainClassName = 'implementations.dm_kernel.super_peer.MainSuperPeer'

jar {
    	from {
        	(configurations.runtime).collect {
            	it.isDirectory() ? it : zipTree(it)
        	}
    	}
    	 destinationDir project.file('../JCL_RELEASE/jcl_JARS_pacu/')
    	 
    	manifest {
        	attributes("Main-Class": "implementations.dm_kernel.super_peer.MainSuperPeer")
    	}
	}
}

project(':JCL_User'){

jar {
    from {
        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
        configurations.runtime.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    
    destinationDir project.file('../JCL_RELEASE/jcl_JARS_pacu/')
    
    manifest {
        attributes 'Implementation-Title': 'ndeploy',
            'Implementation-Version': '0.1.0',
            'Built-By': System.getProperty('user.name'),
            'Built-Date': new Date(),
            'Built-JDK': System.getProperty('java.version')
    	}
	}
}